<!DOCTYPE html>
<html>
<head>
  <title>Shoe Collection Viewer</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
    }
    #shoeList {
      list-style-type: none;
      padding: 0;
    }
    #shoeList li {
      border: 1px solid #ccc;
      padding: 10px;
      margin-bottom: 5px;
    }
  </style>
</head>
<body>
  <h1>Shoe Collection</h1>

  <div>
    <label for="shoeId">Shoe ID (optional):</label>
    <input type="text" id="shoeId">
    <button onclick="fetchShoes()">Fetch Shoe(s)</button>
  </div>

  <ul id="shoeList"></ul>

  <script>
    async function fetchShoes() {
      const shoeId = document.getElementById('shoeId').value;
      const shoeList = document.getElementById('shoeList');
      shoeList.innerHTML = ''; // Clear previous results

      let url = 'https://getshoeinfo-53457502908.us-central1.run.app'; // Replace with your Cloud Function URL
      if (shoeId) {
        url += `?id=${shoeId}`;
      }

      try {
        const response = await fetch(url);
        const data = await response.json();

        if (response.ok) {
          if (Array.isArray(data)) {
            // Multiple shoes returned
            data.forEach(shoe => {
              const listItem = document.createElement('li');
              listItem.textContent = `ID: ${shoe.id}, Data: ${JSON.stringify(shoe)}`;
              shoeList.appendChild(listItem);
            });
          } else if (data && data.id) {
            // Single shoe returned
            const listItem = document.createElement('li');
            listItem.textContent = `ID: ${data.id}, Data: ${JSON.stringify(data)}`;
            shoeList.appendChild(listItem);
          } else {
            shoeList.innerHTML = '<li>No shoes found.</li>';
          }
        } else {
            shoeList.innerHTML = `<li>Error: ${JSON.stringify(data)}</li>`
        }
      } catch (error) {
        console.error('Error fetching shoes:', error);
        shoeList.innerHTML = `<li>Error: ${error.message}</li>`;
      }
    }
  </script>
</body>
</html>